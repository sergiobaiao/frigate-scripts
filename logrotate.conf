# =============================================================================
# FRIGATE SCRIPTS - LOGROTATE CONFIGURATION
# =============================================================================
# Configuração para rotação automática dos logs do sistema Frigate.
#
# INSTALAÇÃO:
#   sudo cp logrotate.conf /etc/logrotate.d/frigate-scripts
#   sudo chmod 644 /etc/logrotate.d/frigate-scripts
#
# TESTE:
#   sudo logrotate -d /etc/logrotate.d/frigate-scripts  # Dry-run
#   sudo logrotate -f /etc/logrotate.d/frigate-scripts  # Força execução
#
# =============================================================================

# Logs do frigate-mover e arquivamento
/var/log/ssd_to_hd.log
/var/log/frigate-archive.log
{
    # Rotaciona diariamente
    daily
    
    # Mantém 30 dias de logs
    rotate 30
    
    # Compacta logs antigos com gzip
    compress
    
    # Aguarda um dia antes de comprimir (útil para debug)
    delaycompress
    
    # Não gera erro se o log não existir
    missingok
    
    # Não rotaciona se o arquivo estiver vazio
    notifempty
    
    # Cria novo arquivo com as mesmas permissões
    create 0644 root root
    
    # Adiciona data ao nome do arquivo rotacionado
    dateext
    dateformat -%Y%m%d
}

# Logs de prune e limpeza do HD
/var/log/frigate-prune-hd.log
{
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 0644 root root
    dateext
    dateformat -%Y%m%d
}

# Logs de retenção de clips
/var/log/frigate-retention.log
{
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 0644 root root
    dateext
    dateformat -%Y%m%d
}

# Logs de vacuum
/var/log/frigate-vacuum.log
{
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 0644 root root
    dateext
    dateformat -%Y%m%d
}

# Logs de status (se habilitado)
/var/log/frigate-status.log
{
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 0644 root root
    dateext
    dateformat -%Y%m%d
}
